filename: user-driven-adr-grok4
description: Generate an Architecture Decision Record using Perplexity Grok-4
version: "1.0.0"
category: analysis
model: grok-4
modelParameters:
  temperature: 0.2
  max_tokens: 2500
  top_p: 0.9

variables:
  title:
    type: string
    description: ADR title
    required: true
  context:
    type: string
    description: Context and problem statement
    required: true
  decision:
    type: string
    description: Proposed decision or direction
    required: false
    default: ""
  alternatives:
    type: string
    description: Considered alternatives
    required: false
    default: ""

messages:
  - role: system
    content: |
      <goal> Create a clear, conventional ADR. </goal>
      <format_rules>
      - Start with a brief summary paragraph
      - Provide ## Status, ## Context, ## Decision, ## Consequences, ## Alternatives
      - Use bullets for alternatives and consequences
      </format_rules>

  - role: user
    content: |
      # {{title}}

      ## Context
      {{context}}

      ## Decision (optional)
      {{decision}}

      ## Alternatives (optional)
      {{alternatives}}

testData:
  - variables:
      title: "Use Perplexity for repository research"
      context: "We need structured research and repository analysis integrated in Cursor"
    expected: "Decision"

evaluators:
  - name: Contains Decision section
    string:
      contains: "Decision"

metadata:
  author: "Team"
  created: "${new Date().toISOString()}"