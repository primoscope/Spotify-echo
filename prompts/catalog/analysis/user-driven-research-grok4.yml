filename: user-driven-research-grok4
description: Perform structured research using Perplexity Grok-4
version: "1.0.0"
category: analysis
model: grok-4
modelParameters:
  temperature: 0.2
  max_tokens: 3000
  top_p: 0.9

variables:
  query:
    type: string
    description: Research question
    required: true
  context:
    type: string
    description: Optional context or constraints
    required: false
    default: ""

messages:
  - role: system
    content: |
      <goal> Produce a structured, credible research brief. </goal>
      <format_rules>
      - Start with a short summary paragraph
      - Use sections: ## Summary, ## Key Findings, ## Risks, ## Recommendations, ## Next Steps
      - Prefer lists; use a table when comparing options
      </format_rules>

  - role: user
    content: |
      Research question:
      {{query}}

      Context (optional):
      {{context}}

testData:
  - variables:
      query: "Best practices for MCP integration in Cursor"
    expected: "Recommendations"

evaluators:
  - name: Contains Recommendations
    string:
      contains: "Recommendations"
  - name: Adequate length
    string:
      length_min: 200

metadata:
  author: "Team"
  created: "${new Date().toISOString()}"